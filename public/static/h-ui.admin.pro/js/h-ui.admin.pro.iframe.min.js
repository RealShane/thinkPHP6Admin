/* -----------H-ui前端框架-------------
* h-ui.admin.pro.js v1.0.7
* http://www.h-ui.net/
* Created & Modified by guojunhui
* Date modified 2019.12.21
* Copyright 2013-2019 郭俊辉 All rights reserved.
* Licensed under MIT license.
* http://opensource.org/licenses/MIT
*/
var num=0,oUl=$("#min_title_list"),hide_nav=$("#Hui-admin-tabNav");function tabNavallwidth(){var d=0,e=hide_nav.find(".acrossTab"),f=hide_nav.find(".Hui-admin-tabNav-wp"),c=hide_nav.find(".acrossTab li"),b=hide_nav.find(".Hui-admin-tabNav-more");if(!e[0]){return}c.each(function(g,h){d+=Number(parseFloat($(this).width()+60))});e.width(d+25);var a=f.width();if(d+25>a){b.show()}else{b.hide();e.css({left:0})}}function toNavPos(){oUl.stop().animate({"left":-num*100},100)}function Hui_admin_tab(g){var f=false,e=0,c=$(g).attr("data-href"),h=$(g).attr("data-title"),a=$(window.parent.document),b=a.find("#min_title_list li"),d=a.find("#iframe_box");if(!c||c==""){alert("data-href不存在");return false}if(!h){alert("data-title不存在");return false}if(h==""){alert("data-title属性不能为空");return false}b.each(function(){if($(this).find("span").attr("data-href")==c){f=true;e=b.index($(this));return false}});if(!f){creatIframe(c,h);min_titleList()}else{b.removeClass("active").eq(e).addClass("active");d.find(".show_iframe").hide().eq(e).show().find("iframe").attr("src",c)}}function min_titleList(){var a=$(window.parent.document),b=a.find("#min_title_list"),c=b.find("li")}function creatIframe(a,b){var h=$(window.parent.document),g=h.find("#min_title_list"),i=h.find("#iframe_box"),e=i.find(".show_iframe"),c=h.find(".acrossTab"),k=h.find(".Hui-admin-tabNav-wp"),m=h.find(".Hui-admin-tabNav-more"),f=0;g.find("li").removeClass("active");g.append('<li class="active"><span data-href="'+a+'">'+b+"</span><i></i><em></em></li>");var d=h.find(".acrossTab li");if(!c[0]){return}d.each(function(n,o){f+=Number(parseFloat($(this).width()+60))});c.width(f+25);var j=k.width();if(f+25>j){m.show()}else{m.hide();c.css({left:0})}e.hide();i.append('<div class="show_iframe"><div class="loading"></div><iframe data-scrollTop="0" frameborder="0" src='+a+"></iframe></div>");var l=i.find(".show_iframe:visible");l.find("iframe").load(function(){l.find(".loading").hide()});if("function"==typeof g.find("li").contextMenu){g.find("li").contextMenu("Huiadminmenu",{bindings:{"closethis":function(n){var o=$(n);if(o.find("i")){o.find("i").trigger("click")}},"closeother":function(n){var o=$(n);if(o.find("i")){removeOther()}},"closeall":function(n){$("#min_title_list li i").trigger("click")},}})}else{console.log("2")}}function removeIframe(){var a=$(window.parent.document),e=a.find("#iframe_box .show_iframe"),d=a.find(".acrossTab li"),c=a.find(".acrossTab li.active"),b=c.index();d.eq(b-1).addClass("active");d.eq(b).remove();e.eq(b-1).show();$(e.eq(b-1).find("iframe")[0].contentWindow.document).scrollTop(e.eq(b-1).find("iframe").attr("data-scrollTop"));e.eq(b).remove()}function removeOther(){var a=$(window.parent.document),e=a.find("#iframe_box .show_iframe"),d=a.find(".acrossTab li"),c=a.find(".acrossTab li.active"),f=c.index();for(var b=1;b<d.length;b++){if(b!=f){d.eq(b).remove();e.eq(b).remove()}}}function removeIframeAll(){var a=$(window.parent.document),d=a.find("#iframe_box .show_iframe"),c=a.find(".acrossTab li");for(var b=0;b<c.length;b++){if(c.eq(b).find("i").length>0){c.eq(b).remove();d.eq(b).remove()}}}function Huiasidedisplay(){if($(window).width()<=768){$("body").addClass("big-page");$(".Hui-admin-dislpayArrow a").addClass("open")}}function getskincookie(){var a=$.cookie("Huiskin");var b=$("#skin").attr("href");var c="";if(a==null||a==""){a="default"}if(b!=undefined){c=b.substring(0,b.lastIndexOf("skin/"))+"skin/"+a+"/skin.css";$("#skin").attr("href",c)}$("#Hui-skin .dropDown-menu a").on("click",function(){var d=$(this).attr("data-val");$.cookie("Huiskin",d);c=b.substring(0,b.lastIndexOf("skin/"))+"skin/"+d+"/skin.css";$(window.frames.document).contents().find("#skin").attr("href",c)})}function layer_show(d,b,a,c){if(d==null||d==""){d=false}if(b==null||b==""){b="404.html"}if(a==null||a==""){a=800}if(c==null||c==""){c=($(window).height()-50)}layer.open({type:2,area:[a+"px",c+"px"],fix:false,maxmin:true,shade:0.4,title:d,content:b})}function getHTMLDate(f){var g=new Date();var e=new Array(7);var b="";var c="";var a="";e[0]="星期日";e[1]="星期一";e[2]="星期二";e[3]="星期三";e[4]="星期四";e[5]="星期五";e[6]="星期六";_yy=g.getFullYear();b=g.getMonth()+1;c=g.getDate();a=e[g.getDay()];f.html(_yy+"年"+b+"月"+c+"日 "+a)}function myselfinfo(){layer.open({type:1,area:["300px","200px"],fix:false,maxmin:true,shade:0.4,title:"查看信息",content:"<div>管理员信息</div>"})}function asideInteractive(){var a;$(window).resize(function(){clearTimeout(a);a=setTimeout(function(){Huiasidedisplay()},500)});$(".nav-toggle").click(function(){$(".Hui-admin-aside-wrapper").slideToggle()});$(".Hui-admin-aside-wrapper").on("click",".Hui-admin-menu-dropdown dd li a",function(){if($(window).width()<=768){$("body").addClass("big-page");$(".Hui-admin-dislpayArrow a").addClass("open")}});$(".Hui-admin-aside-mask").click(function(){$("body").addClass("big-page");$(".Hui-admin-dislpayArrow a").addClass("open")});$(".Hui-admin-aside-wrapper").Huifold({titCell:".Hui-admin-menu-dropdown > .Hui-menu > .Hui-menu-title",mainCell:".Hui-admin-menu-dropdown > .Hui-menu > .Hui-menu-item",});$(".Hui-menu-item").Huifold({titCell:".Hui-menu > .Hui-menu-title",mainCell:".Hui-menu > .Hui-menu-item",})}$(function(){getHTMLDate($("#top_time"));getskincookie();Huiasidedisplay();asideInteractive();tabNavallwidth();$(".Hui-admin-aside-wrapper").on("click",".Hui-menu .Hui-menu-title a,.Hui-menu .Hui-menu-item a,.Hui-menu .Hui-menu-item-frist a",function(){Hui_admin_tab(this);$(".Hui-admin-aside-wrapper").find(".Hui-menu .Hui-menu-title,.Hui-menu .Hui-menu-item ul li,.Hui-menu .Hui-menu-item-frist ul li").removeClass("current");$(this).parent().addClass("current")});$(document).on("click","#min_title_list li",function(){var b=$(this).index();var a=$("#iframe_box");$("#min_title_list li").removeClass("active").eq(b).addClass("active");a.find(".show_iframe").hide().eq(b).show()});$(document).on("click","#min_title_list li i",function(){var a=$(this).parents("li").index();$(this).parent().remove();$("#iframe_box").find(".show_iframe").eq(a).remove();num==0?num=0:num--;tabNavallwidth()});$(document).on("dblclick","#min_title_list li",function(){var a=$(this).index();var b=$("#iframe_box");if(a>0){$(this).remove();$("#iframe_box").find(".show_iframe").eq(a).remove();num==0?num=0:num--;$("#min_title_list li").removeClass("active").eq(a-1).addClass("active");b.find(".show_iframe").hide().eq(a-1).show();tabNavallwidth()}else{return false}});$("#js-tabNav-next").click(function(){num==oUl.find("li").length-1?num=oUl.find("li").length-1:num++;toNavPos()});$("#js-tabNav-prev").click(function(){num==0?num=0:num--;toNavPos()})});
